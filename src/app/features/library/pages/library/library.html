<div class="library">

  <h2>ðŸŽµ BibliothÃ¨que musicale</h2>

  <!-- ðŸ” Recherche -->
  <input
    type="text"
    placeholder="Rechercher par titre ou artiste"
    [(ngModel)]="searchTerm"
    class="search-input"
  />

  <!-- ðŸŽ¼ Filtre catÃ©gorie -->
  <select [(ngModel)]="selectedCategory" class="filter-select">
    <option value="all">Toutes les catÃ©gories</option>
    <option value="pop">Pop</option>
    <option value="rock">Rock</option>
    <option value="rap">Rap</option>
    <option value="jazz">Jazz</option>
    <option value="classical">Classique</option>
    <option value="other">Autre</option>
  </select>

  <!-- â³ Chargement -->
  <p *ngIf="(trackService.state$ | async) === 'loading'">
    Chargement des tracks...
  </p>

  <!-- âŒ Erreur -->
  <p class="error" *ngIf="(trackService.state$ | async) === 'error'">
    {{ trackService.error$ | async }}
  </p>

  <!-- ðŸ“ƒ Liste -->
  <ul *ngIf="(trackService.state$ | async) === 'success'">
    <li *ngFor="let track of filterTracks(trackService.tracks$ | async || [])">
      <strong>{{ track.title }}</strong> â€“ {{ track.artist }}
      <span class="category">({{ track.category }})</span>

      <div class="actions">
        <a [routerLink]="['/track', track.id]">â–¶ Lire</a>
        <button (click)="deleteTrack(track.id)">ðŸ—‘ Supprimer</button>
      </div>
    </li>
  </ul>

  <!-- ðŸš« Aucun rÃ©sultat -->
  <p *ngIf="(trackService.tracks$ | async)?.length === 0">
    Aucun track dans la bibliothÃ¨que.
  </p>

</div>
